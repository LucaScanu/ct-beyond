"use strict";function getData(){var e=new XMLHttpRequest;e.open("GET","https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,contentDetails,status&maxResults=10&playlistId=PLSi28iDfECJPJYFA4wjlF5KUucFvc0qbQ&key=AIzaSyCuv_16onZRx3qHDStC-FUp__A6si-fStw"),e.onload=function(){if(200===e.status){var t=e.responseText,n=JSON.parse(t);setUpPage(n.items),globalData.push(n.items)}else console.log("Request failed.  Returned status of "+e.status)},e.send()}function setUpPage(e){console.log(e);var t=document.getElementById("main"),n=document.createElement("h1"),i=document.createElement("div");n.classList.add("playlist-text");var a=document.createTextNode("My YouTube playlist");n.appendChild(a),t.appendChild(i),i.appendChild(n),i.classList.add("parentDiv"),createTile(i,e)}function keyboardNavigation(e){document.addEventListener("keydown",function(t){if(checkClass(t),9===t.keyCode&&9===document.activeElement.id&&(console.log("after 9",document.activeElement.parentNode.firstChild.nextSibling),document.activeElement.parentNode.firstChild.nextSibling.focus()),console.log("active",window.activeElement),13===t.keyCode&&document.activeElement.classList.contains("list")){console.log("active",document.activeElement),console.log("active id",document.activeElement.id);var n=document.activeElement.id;listenerFunction(e[0][n])}})}function checkClass(e){var t=document.getElementsByTagName("ul")[0];console.log("show ul",t),t.classList.contains("show")&&9===e.keyCode&&setTimeout(function(){document.getElementsByClassName("button")[0].focus()},0)}function createTile(e,t){var n=0;t.forEach(function(t){var i=document.createElement("ul");i.classList.add("list","col-s-9","col-m-8","col-l-7"),i.setAttribute("id",n++),i.setAttribute("tabindex","0"),i.setAttribute("role","ulnk"),e.appendChild(i),addListener(i,t),addTitle(t,i)})}function addTitle(e,t){var n=document.createElement("li");t.classList.contains("list")?n.classList.add("list__item--title"):n.classList.add("show__item--title");var i=document.createTextNode(e.snippet.title);n.appendChild(i),t.appendChild(n),setDate(e,t)}function setDate(e,t){var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date(e.snippet.publishedAt),a=i.getDate(),s=i.getMonth(),l=i.getFullYear();addPublished("Published on "+a+" "+n[s]+", "+l,e,t)}function addListener(e,t){e&&(e.onclick=function(){listenerFunction(t)})}function listenerFunction(e){var t=document.getElementById("main");t.innerHTML="",openShowPage(t,e)}function openShowPage(e,t){backToButton(e);var n=document.createElement("div");n.classList.add("parentDiv"),e.appendChild(n);var i=document.createElement("ul");i.classList.add("show"),n.appendChild(i),addTitle(t,i)}function addVideo(e,t){console.log("getting here");var n=document.createElement("li");n.classList.add("show__item");var i=e.contentDetails.videoId,a=document.createElement("iframe");a.classList.add("show__item--iframe"),a.src="https://www.youtube.com/embed/"+i,n.appendChild(a),t.appendChild(n),addDescription(e,t)}function backToButton(e){var t=document.createElement("button");t.classList.add("button"),t.setAttribute("tabindex","0"),t.innerHTML="< Back to list of videos",e.appendChild(t),t.onclick=function(){e.innerHTML="",getData()}}function addPublished(e,t,n){var i=document.createElement("li");n.classList.contains("list")?i.classList.add("list__item--published"):i.classList.add("show__item--published");var a=document.createTextNode(e);i.appendChild(a),n.appendChild(i),n.classList.contains("show")?addVideo(t,n):addDescription(t,n)}function addDescription(e,t){var n=document.createElement("li");t.classList.contains("list")?n.classList.add("list__item--description"):n.classList.add("show__item--description");var i=document.createTextNode(e.snippet.description);n.appendChild(i),t.appendChild(n),checkText(t,n),t.classList.contains("list")&&addThumbnail(e,t)}function checkText(e,t){e.classList.contains("list")&&t.innerHTML.length>123&&(t.innerHTML=t.innerHTML.substring(0,123)+"...")}function addThumbnail(e,t){var n=document.createElement("li"),i=document.createElement("img");i.classList.add("list__item--img"),n.appendChild(i),i.src=e.snippet.thumbnails.default.url,i.alt=e.snippet.title+" Album artwork",t.appendChild(n)}var globalData=[];getData(),keyboardNavigation(globalData),console.log("data array",globalData);