var Player=Player||{};Player.init=function(){this.data=[],this.mainElement=document.getElementsByTagName("main")[0],this.listContainer=document.createElement("ul"),this.getData(),this.keyboardNavigation(this.data)},Player.getData=function(){const e=new XMLHttpRequest;e.open("GET","https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,contentDetails,status&maxResults=10&playlistId=PLSi28iDfECJPJYFA4wjlF5KUucFvc0qbQ&key=AIzaSyCuv_16onZRx3qHDStC-FUp__A6si-fStw"),e.onload=function(){if(200===e.status){const t=JSON.parse(e.responseText);Player.data.push(t.items),Player.appendDataToPage()}else console.log("Request failed. Retuened status of "+e.status)},e.send()},Player.appendDataToPage=function(){Player.listContainer.classList.add("list"),Player.mainElement.appendChild(Player.listContainer),Player.createTile()},Player.createTile=function(){Player.data[0].forEach(function(e,t){const n=document.createElement("li");n.setAttribute("id",t),n.setAttribute("tabindex","0"),n.setAttribute("role","link"),n.classList.add("list__item","col-s-9","col-m-8","col-l-7"),Player.addTitle(e,n)})},Player.addClass=function(e,t,n,a){e.classList.contains("list__item")?t.classList.add(n):t.classList.add(a)},Player.addTitle=function(e,t){const n=document.createElement("h2");Player.addClass(t,n,"list__item--title","show__item--title");const a=document.createTextNode(e.snippet.title);n.appendChild(a),t.appendChild(n),Player.convertDate(e,t)},Player.convertDate=function(e,t){const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=new Date(e.snippet.publishedAt),i=a.getDate(),l=a.getMonth(),s=a.getFullYear(),o="Published on "+i+" "+n[l]+", "+s;Player.addPublished(o,e,t)},Player.addPublished=function(e,t,n){const a=document.createElement("h3");Player.addClass(n,a,"list__item--published","show__item--published");const i=document.createTextNode(e);a.appendChild(i),n.appendChild(a),n.classList.contains("show__item")?Player.addVideo(t,n):Player.addDescription(t,n)},Player.addVideo=function(e,t){const n=e.contentDetails.videoId,a=document.createElement("iframe");a.classList.add("show__item--iframe"),a.src="https://www.youtube.com/embed/"+n,t.appendChild(a),Player.addDescription(e,t)},Player.addDescription=function(e,t){const n=document.createElement("p");Player.addClass(t,n,"list__item--description","show__item--description");const a=document.createTextNode(e.snippet.description);n.appendChild(a),t.appendChild(n),Player.checkText(t,n),t.classList.contains("list__item")&&Player.addThumbnail(e,t)},Player.checkText=function(e,t){e.classList.contains("list__item")&&t.innerHTML.length>123&&(t.innerHTML=t.innerHTML.substring(0,123)+"...")},Player.addThumbnail=function(e,t){const n=document.createElement("img");n.classList.add("list__item--img"),n.src=e.snippet.thumbnails.high.url,n.alt=e.snippet.title+" Album artwork",t.appendChild(n),Player.appendTileToPage(e,t)},Player.appendTileToPage=function(e,t){Player.listContainer.append(t),t.addEventListener("click",function(){Player.openShowPage(e)}),t.addEventListener("mouseover",function(e){Player.listContainer.childNodes.forEach(function(t){t.id!==e.target.id&&(t.style.opacity=".2")})}),t.addEventListener("mouseout",function(){Player.listContainer.childNodes.forEach(function(e){e.style.opacity="1"})})},Player.openShowPage=function(e){Player.mainElement.innerHTML="",Player.backToButton();const t=document.createElement("ul");Player.mainElement.appendChild(t),t.classList.add("show");const n=document.createElement("li");n.classList.add("show__item"),t.appendChild(n),Player.addTitle(e,n)},Player.backToButton=function(){const e=document.createElement("button");e.classList.add("button"),e.setAttribute("tabindex","0"),e.innerHTML="< Back to list of videos",Player.mainElement.appendChild(e),e.onclick=function(){Player.mainElement.innerHTML="",Player.mainElement.appendChild(Player.listContainer)}},Player.keyboardNavigation=function(e){document.addEventListener("keydown",function(t){if(9===t.keyCode&&9===document.activeElement.id&&document.activeElement.parentNode.firstChild.nextSibling.focus(),13===t.keyCode&&document.activeElement.classList.contains("list__item")){var n=document.activeElement.id,a=e[0][n];Player.openShowPage(a)}Player.checkClass(t)})},Player.checkClass=function(e){document.getElementsByTagName("ul")[0].classList.contains("show")&&9===e.keyCode&&setTimeout(function(){document.getElementsByClassName("button")[0].focus()},0)},Player.init();